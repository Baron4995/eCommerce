{"ast":null,"code":"import { Orders } from '../orders/orders-list/orders';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./cart service/cart.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../orders/orders-list/orders.service\";\nimport * as i4 from \"../accounts/account-service.service\";\nimport * as i5 from \"@angular/common\";\nfunction CartComponent_div_1_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"input\", 7);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_18_Template_input_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const cart_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.increment(cart_r3, i_r4));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 8);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_18_Template_input_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const cart_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.decrement(cart_r3, i_r4));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 9);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_18_Template_input_click_14_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.addToWishlist(ctx_r8.product));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"input\", 10);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_18_Template_input_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const cart_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.removeProduct(cart_r3, i_r4));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cart_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cart_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cart_r3.brand);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", cart_r3.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cart_r3.qty);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", cart_r3.price, \"\");\n  }\n}\nfunction CartComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"h3\");\n    i0.ɵɵtext(3, \"Cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 2);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_Template_input_click_4_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.backToProducts());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"table\", 3)(6, \"tr\")(7, \"th\");\n    i0.ɵɵtext(8, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Brand\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Thumbnail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"th\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, CartComponent_div_1_tr_18_Template, 16, 5, \"tr\", 4);\n    i0.ɵɵelementStart(19, \"tr\")(20, \"td\");\n    i0.ɵɵtext(21, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"div\")(25, \"input\", 5);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_Template_input_click_25_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.proceedToPayment());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cart);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.totalPrice);\n  }\n}\nfunction CartComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Add your payment information\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h6\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 11);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_2_Template_input_click_7_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.makeAPayment());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Your bank balance is: \", ctx_r1.bankBalance, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Total due: \", ctx_r1.totalPrice + 100, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r1.b1)(\"disabled\", ctx_r1.flagBalance);\n  }\n}\nexport class CartComponent {\n  constructor(cartService, router, route, orderService, accountService) {\n    this.cartService = cartService;\n    this.router = router;\n    this.route = route;\n    this.orderService = orderService;\n    this.accountService = accountService;\n    this.product = [];\n    this.cart = [];\n    this.totalPrice = 0;\n    this.cartFlag = true;\n  }\n  ngOnInit() {\n    let obj = sessionStorage.getItem(\"user\");\n    if (obj != null) {\n      this.user = JSON.parse(obj);\n    }\n    this.cartService.getCart.subscribe({\n      next: data => {\n        this.cart = data;\n        this.calculate();\n      },\n      error: error => {},\n      complete: () => {}\n    });\n    this.accountService.findBalance(this.user.emailid).subscribe({\n      next: data => {\n        this.bankBalance = eval(data);\n      },\n      error: error => {\n        console.log(error);\n      },\n      complete: () => {\n        console.log(\"Account balance retrived\");\n      }\n    });\n  }\n  increment(cart, i) {\n    this.cart[i].qty = eval(cart.qty) + 1;\n    this.calculate();\n  }\n  decrement(cart, i) {\n    this.cart[i].qty = eval(cart.qty) - 1;\n    this.calculate();\n  }\n  addToWishlist(product) {\n    console.log(product);\n  }\n  removeProduct(cart, i) {\n    this.cartService.removeDataInCart(cart, i);\n    this.calculate();\n  }\n  calculate() {\n    this.totalPrice = this.cart.reduce((previousValue, currentValue) => {\n      return previousValue + currentValue.qty * currentValue.price;\n    }, 0);\n  }\n  backToProducts() {\n    this.router.navigate([\"/products\"], {\n      relativeTo: this.route\n    });\n  }\n  proceedToPayment() {\n    if (this.cart.length === 0) {\n      this.paymentFlag = false;\n      alert(\"You have no items your the cart\");\n    } else {\n      this.paymentFlag = true;\n      this.cartFlag = false;\n      if (this.totalPrice >= this.bankBalance) {\n        this.b1 = \"Insuficient Amount\";\n        this.flagBalance = true;\n      } else {\n        this.b1 = \"Make a Payment\";\n        this.flagBalance = false;\n      }\n    }\n    // this.cart.splice(0, this.cart.length);\n  }\n\n  makeAPayment() {\n    let orderDeatils = new Orders();\n    orderDeatils.orderDate = new Date().toISOString().substring(0, 10);\n    orderDeatils.products = [...this.cart]; //copying cart array into products. This is called spread operator.\n    orderDeatils.totalItems = this.cart.length;\n    orderDeatils.shipmentCharges = 100;\n    orderDeatils.totalAmount = this.totalPrice;\n    orderDeatils.email = this.user.emailid;\n    this.orderService.placeOrder(orderDeatils).subscribe({\n      next: data => {\n        console.log(data);\n      },\n      error: error => {\n        console.log(error);\n      },\n      complete: () => {\n        console.log(\"Order placed\");\n      }\n    });\n    this.cart.splice(0, this.cart.length);\n    this.totalPrice = 0;\n    this.cartFlag = false;\n    this.paymentFlag = false;\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.AccountServiceService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [1, \"top\"], [\"type\", \"button\", \"value\", \"Keep Shopping\", 1, \"btn\", \"btn-primary\", \"btn-two\", 3, \"click\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"value\", \"Proceed To Payment\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"alt\", \"image Not Found\", 3, \"src\"], [\"type\", \"button\", \"value\", \"Add One More\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Take Out One\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Add To Whishlist\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Delete Product\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"value\", \"disabled\", \"click\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtemplate(1, CartComponent_div_1_Template, 26, 2, \"div\", 0);\n      i0.ɵɵtemplate(2, CartComponent_div_2_Template, 8, 4, \"div\", 0);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.cartFlag);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.paymentFlag);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf],\n  styles: [\"div[_ngcontent-%COMP%]{\\n    margin-top: 77px;\\n}\\n\\n.top[_ngcontent-%COMP%]{\\n    margin-bottom: 31px;\\n}\\n\\n.btn-one[_ngcontent-%COMP%]{\\n    float: right;\\n    margin-right: 30px;\\n}\\n\\n.btn-two[_ngcontent-%COMP%]{\\n    float: right;\\n    margin-right: 5px;\\n}\\n\\nh3[_ngcontent-%COMP%]{\\n    margin-bottom: 31px;\\n    display: inline;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{\\n    border: 1px solid black;\\n    padding: 7px 20px;\\n}\\n\\nth[_ngcontent-%COMP%]{\\n    text-align: center;\\n    background-color: blue;\\n    color: white;\\n    height: 47px;\\n}\\n\\ntr[_ngcontent-%COMP%]:nth-child(odd) {\\n    background-color: #d3d3d3;\\n}\\n\\nimg[_ngcontent-%COMP%]{\\n    width: 170px;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]{\\n    background-color: rgb(28, 27, 27);\\n    border-color: rgb(28, 27, 27);\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:hover{\\n    background-color: green;\\n}\\n\\n.btn-danger[_ngcontent-%COMP%]{\\n    background-color: green;\\n    border: green;\\n}\\n\\n.btn-danger[_ngcontent-%COMP%]:hover{\\n    background-color: rgb(18, 156, 18);\\n}\\n\\n.btn-width[_ngcontent-%COMP%]{\\n    width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jYXJ0L2NhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFlBQVk7SUFDWixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osWUFBWTtBQUNoQjs7QUFFQTtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxpQ0FBaUM7SUFDakMsNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxrQ0FBa0M7QUFDdEM7O0FBRUE7SUFDSSxXQUFXO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyJkaXZ7XG4gICAgbWFyZ2luLXRvcDogNzdweDtcbn1cblxuLnRvcHtcbiAgICBtYXJnaW4tYm90dG9tOiAzMXB4O1xufVxuXG4uYnRuLW9uZXtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgbWFyZ2luLXJpZ2h0OiAzMHB4O1xufVxuXG4uYnRuLXR3b3tcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG59XG5cbmgze1xuICAgIG1hcmdpbi1ib3R0b206IDMxcHg7XG4gICAgZGlzcGxheTogaW5saW5lO1xufVxuXG50aCwgdGR7XG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgcGFkZGluZzogN3B4IDIwcHg7XG59XG5cbnRoe1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibHVlO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBoZWlnaHQ6IDQ3cHg7XG59XG5cbnRyOm50aC1jaGlsZChvZGQpIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDNkM2QzO1xufVxuXG5pbWd7XG4gICAgd2lkdGg6IDE3MHB4O1xufVxuXG4uYnRuLXByaW1hcnl7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI4LCAyNywgMjcpO1xuICAgIGJvcmRlci1jb2xvcjogcmdiKDI4LCAyNywgMjcpO1xufVxuXG4uYnRuLXByaW1hcnk6aG92ZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XG59XG5cbi5idG4tZGFuZ2Vye1xuICAgIGJhY2tncm91bmQtY29sb3I6IGdyZWVuO1xuICAgIGJvcmRlcjogZ3JlZW47XG59XG5cbi5idG4tZGFuZ2VyOmhvdmVye1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigxOCwgMTU2LCAxOCk7XG59XG5cbi5idG4td2lkdGh7XG4gICAgd2lkdGg6IDEwMCU7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Orders","i0","CartComponent","constructor","cartService","router","route","orderService","accountService","ngOnInit","obj","sessionStorage","getItem","user","JSON","parse","getCart","subscribe","next","data","cart","calculate","error","complete","findBalance","emailid","bankBalance","eval","console","log","increment","i","qty","decrement","addToWishlist","product","removeProduct","removeDataInCart","totalPrice","reduce","previousValue","currentValue","price","backToProducts","navigate","relativeTo","proceedToPayment","length","paymentFlag","alert","cartFlag","b1","flagBalance","makeAPayment","orderDeatils","orderDate","Date","toISOString","substring","products","totalItems","shipmentCharges","totalAmount","email","placeOrder","splice","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/baron/Desktop/COMPUTER SCIENCE/eCommerce/user-dashboard/src/app/components/cart/cart.component.ts","/Users/baron/Desktop/COMPUTER SCIENCE/eCommerce/user-dashboard/src/app/components/cart/cart.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Cart } from 'src/app/model/cart';\nimport { AccountServiceService } from '../accounts/account-service.service';\nimport { Orders } from '../orders/orders-list/orders';\nimport { OrdersService } from '../orders/orders-list/orders.service';\nimport { Products } from '../products/products-list/products';\nimport { CartService } from './cart service/cart.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit{\n  \n  product:Array<Products> = [];\n  cart:Array<Cart> = [];\n  totalPrice:number = 0;\n  user:any;\n  cartFlag:boolean = true;\n  bankBalance:any;\n  b1:any;\n  paymentFlag:boolean;\n  flagBalance:boolean;\n\n  constructor(public cartService:CartService, private router:Router, private route:ActivatedRoute, public orderService:OrdersService,\n              public accountService:AccountServiceService){}\n\n  ngOnInit(): void {\n    let obj = sessionStorage.getItem(\"user\");\n    if(obj != null){\n      this.user = JSON.parse(obj);\n    }\n    this.cartService.getCart.subscribe({\n      next:(data:any)=>{\n        this.cart=data;\n        this.calculate();\n      },\n      error:(error:any)=>{\n\n      },\n      complete:()=>{\n\n      }\n    })\n    this.accountService.findBalance(this.user.emailid).subscribe({\n      next:(data:any)=>{\n        this.bankBalance = eval(data);\n      },\n      error:(error:any)=>{\n        console.log(error);\n      },\n      complete:()=>{\n        console.log(\"Account balance retrived\");\n      }\n    })\n  }\n\n  increment(cart:any, i:number){\n    this.cart[i].qty = eval(cart.qty)+1;\n    this.calculate();\n  }\n\n  decrement(cart:any, i:number){\n    this.cart[i].qty = eval(cart.qty)-1;\n    this.calculate();\n  }\n\n  addToWishlist(product:any){\n    console.log(product);\n  }\n\n  removeProduct(cart:any, i:number){\n    this.cartService.removeDataInCart(cart, i);\n    this.calculate();\n  }\n\n  calculate():void{\n    this.totalPrice = this.cart.reduce((previousValue:any, currentValue:any)=>{\n      return previousValue + currentValue.qty * currentValue.price;\n    }, 0)\n  }\n\n  backToProducts(){\n    this.router.navigate([\"/products\"], {relativeTo:this.route})\n  }\n\n  \n\n  proceedToPayment(){\n    if(this.cart.length === 0){\n      this.paymentFlag = false;\n      alert(\"You have no items your the cart\");\n    }else{\n      this.paymentFlag = true;\n      this.cartFlag = false;\n      if(this.totalPrice >= this.bankBalance){\n        this.b1 = \"Insuficient Amount\";\n        this.flagBalance = true;\n      }else{\n        this.b1 = \"Make a Payment\";\n        this.flagBalance = false;\n      }\n    }\n    // this.cart.splice(0, this.cart.length);\n  }\n\n  makeAPayment(){\n    let orderDeatils = new Orders();\n      orderDeatils.orderDate = new Date().toISOString().substring(0, 10);\n      orderDeatils.products = [...this.cart]; //copying cart array into products. This is called spread operator.\n      orderDeatils.totalItems = this.cart.length;\n      orderDeatils.shipmentCharges = 100;\n      orderDeatils.totalAmount = this.totalPrice;\n      orderDeatils.email = this.user.emailid;\n\n    this.orderService.placeOrder(orderDeatils).subscribe({\n      next:(data:any)=>{\n        console.log(data);\n      },\n      error:(error:any)=>{\n        console.log(error);\n      },\n      complete:()=>{\n        console.log(\"Order placed\");\n      }\n    })\n    this.cart.splice(0, this.cart.length);\n    this.totalPrice = 0;\n    this.cartFlag = false;\n    this.paymentFlag = false;\n  }\n\n}\n","<div>\n    <div *ngIf=\"cartFlag\">\n        <div class=\"top\">\n            <h3>Cart</h3>\n            <input class=\"btn btn-primary btn-two\" type=\"button\" value=\"Keep Shopping\" (click)=\"backToProducts()\">\n        </div>\n        <table class=\"table\">\n            <tr>\n                <th>Title</th>\n                <th>Brand</th>\n                <th>Thumbnail</th>\n                <th>Quantity</th>\n                <th>Price</th>\n                <th></th>\n            </tr>\n            <tr *ngFor=\"let cart of cart; let i=index\">\n                <td>{{cart.title}}</td>\n                <td>{{cart.brand}}</td>\n                <td><img src=\"{{cart.thumbnail}}\" alt=\"image Not Found\"></td>\n                <td>{{cart.qty}}</td>\n                <td>${{cart.price}}</td>\n                <td>\n                    <input class=\"btn btn-primary btn-width\" type=\"button\" value=\"Add One More\" (click)=\"increment(cart, i)\">\n                    <input class=\"btn btn-primary btn-width\" type=\"button\" value=\"Take Out One\" (click)=\"decrement(cart, i)\">\n                    <input class=\"btn btn-primary btn-width\" type=\"button\" value=\"Add To Whishlist\" (click)=\"addToWishlist(product)\">\n                    <input class=\"btn btn-primary btn-width\" type=\"button\" value=\"Delete Product\" (click)=\"removeProduct(cart, i)\">\n                </td>\n            </tr>\n            <tr>\n                <td>Total</td>\n                <td>{{totalPrice}}</td>\n            </tr>\n        </table>\n        <div>\n            <input class=\"btn btn-primary btn-width\" type=\"button\" value=\"Proceed To Payment\" (click)=\"proceedToPayment()\">\n        </div>\n    </div>\n    <div *ngIf=\"paymentFlag\">\n        <h2>Add your payment information</h2>\n        <h4>Your bank balance is: {{bankBalance}}</h4>\n        <h6>Total due: {{totalPrice + 100}}</h6>\n        <input class=\"btn btn-primary btn-width\" type=\"button\" [value]=\"b1\" (click)=\"makeAPayment()\" [disabled]=\"flagBalance\">\n    </div>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}