{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./categories-list/categories.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CategoriesComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"img\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"input\", 13);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_tr_22_Template_input_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r6 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      const _r4 = i0.ɵɵreference(26);\n      return i0.ɵɵresetView(ctx_r8.updateCategory(category_r6, _r4));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 14);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_tr_22_Template_input_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.deleteCategory(category_r6.cid));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const category_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r7 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r6.categoryName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r6.categoryDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", category_r6.categoryImageUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CategoriesComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h2\");\n    i0.ɵɵtext(2, \"Add Category Deatils\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"div\", 16)(4, \"form\", 17);\n    i0.ɵɵlistener(\"ngSubmit\", function CategoriesComponent_ng_template_23_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.storeCategory());\n    });\n    i0.ɵɵelementStart(5, \"label\", 18);\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 19)(8, \"br\");\n    i0.ɵɵelementStart(9, \"label\", 20);\n    i0.ɵɵtext(10, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 21)(12, \"br\");\n    i0.ɵɵelementStart(13, \"label\", 22);\n    i0.ɵɵtext(14, \"Image URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 23)(16, \"br\");\n    i0.ɵɵelementStart(17, \"button\", 24);\n    i0.ɵɵtext(18, \"Add Category\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(19, \"br\");\n    i0.ɵɵelementStart(20, \"input\", 25);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_ng_template_23_Template_input_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const modal_r11 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r11.close(\"close\"));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.addCategoryForm);\n  }\n}\nfunction CategoriesComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h2\");\n    i0.ɵɵtext(2, \"Update Category Deatils\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"div\", 16)(4, \"form\", 17);\n    i0.ɵɵlistener(\"ngSubmit\", function CategoriesComponent_ng_template_25_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.updateCategoryFromDb());\n    });\n    i0.ɵɵelementStart(5, \"label\", 26);\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 27)(8, \"br\");\n    i0.ɵɵelementStart(9, \"label\", 28);\n    i0.ɵɵtext(10, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 29)(12, \"br\");\n    i0.ɵɵelementStart(13, \"label\", 30);\n    i0.ɵɵtext(14, \"Image URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 31)(16, \"br\");\n    i0.ɵɵelementStart(17, \"button\", 32);\n    i0.ɵɵtext(18, \"Update Category\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(19, \"br\");\n    i0.ɵɵelementStart(20, \"input\", 33);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_ng_template_25_Template_input_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const modal_r15 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r15.close(\"close\"));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r5.addCategoryForm);\n  }\n}\nexport class CategoriesComponent {\n  constructor(categoriesService, router, route, modal) {\n    this.categoriesService = categoriesService;\n    this.router = router;\n    this.route = route;\n    this.modal = modal;\n    this.categories = [];\n  }\n  ngOnInit() {\n    this.loadAllCategories();\n    this.addCategoryForm = new FormGroup({\n      cid: new FormControl(\"\"),\n      categoryName: new FormControl(\"\"),\n      categoryDescription: new FormControl(\"\"),\n      categoryImageUrl: new FormControl(\"\")\n    });\n  }\n  loadAllCategories() {\n    this.categoriesService.loadAllCategories().subscribe({\n      next: result => {\n        this.categories = result;\n      },\n      error: error => {},\n      complete: () => {}\n    });\n  }\n  backToProducts() {\n    this.router.navigate([\"/products\"], {\n      relativeTo: this.route\n    });\n  }\n  addCategoryDetails(addCategory) {\n    this.modal.open(addCategory);\n  }\n  storeCategory() {\n    let category = this.addCategoryForm.value;\n    this.categoriesService.storteCategory(category).subscribe({\n      next: data => {\n        alert(\"New category stored succesfully\");\n        console.log(data);\n      },\n      error: error => {\n        console.log(error);\n      },\n      complete: () => {\n        this.loadAllCategories();\n        console.log(\"Completed\");\n      }\n    });\n    this.addCategoryForm.reset();\n    console.log(category);\n  }\n  deleteCategory(cid) {\n    let flagDelete = confirm(\"Are you sure you want to delete this category?\");\n    if (flagDelete) {\n      this.categoriesService.deleteCategoryById(cid).subscribe({\n        next: data => {\n          console.log(data);\n          this.loadAllCategories();\n        },\n        error: error => {\n          console.log(error);\n        },\n        complete: () => {\n          this.loadAllCategories();\n          alert(\"Category succesfully deleted :)\");\n          console.log(\"Task Completed\");\n        }\n      });\n    } else {\n      alert(\"Category was not deleted\");\n    }\n  }\n  searchCategory(categoryName) {\n    this.categoriesService.searchCaregory(categoryName).subscribe({\n      next: data => {\n        // this.categories.splice(0, this.categories.length);\n        this.categories = data;\n      },\n      error: error => {\n        console.log(error);\n      },\n      complete: () => {\n        console.log(\"Completed\");\n      }\n    });\n  }\n  updateCategory(category, updateCategory) {\n    // console.log(category);\n    this.addCategoryForm.patchValue({\n      cid: category.cid,\n      categoryName: category.categoryName,\n      categoryDescription: category.categoryDescription,\n      categoryImageUrl: category.categoryImageUrl\n    });\n    this.modal.open(updateCategory);\n  }\n  updateCategoryFromDb() {\n    this.categoriesService.updateCategory(this.addCategoryForm.value).subscribe({\n      next: data => {\n        alert(\"Category updated succesfully\");\n        console.log(data);\n      },\n      error: error => {\n        console.log(error);\n      },\n      complete: () => {\n        this.loadAllCategories();\n        console.log(\"Completed\");\n      }\n    });\n    window.location.reload();\n    this.addCategoryForm.reset();\n  }\n}\nCategoriesComponent.ɵfac = function CategoriesComponent_Factory(t) {\n  return new (t || CategoriesComponent)(i0.ɵɵdirectiveInject(i1.CategoriesService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.NgbModal));\n};\nCategoriesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CategoriesComponent,\n  selectors: [[\"app-categories\"]],\n  decls: 28,\n  vars: 1,\n  consts: [[1, \"top\"], [\"type\", \"button\", \"value\", \"Return to Products\", 1, \"btn\", \"btn-primary\", \"btn-one\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Add New Category\", 1, \"btn\", \"btn-primary\", \"btn-one\", 3, \"click\"], [1, \"serach-div\"], [\"for\", \"searchBar\", 1, \"Search-text\"], [\"type\", \"search\", \"id\", \"searchBar\", \"name\", \"searchCategory\", 1, \"form-control\", \"search-category\", 3, \"keyup\"], [\"categoryName\", \"\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"modal-dialog\"], [\"addCategory\", \"\"], [\"updateCategoryModal\", \"\"], [\"alt\", \"Image Not Found\", 3, \"src\"], [\"type\", \"button\", \"value\", \"Update\", 1, \"btn\", \"btn-primary\", \"btn-width\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Delete\", 1, \"btn\", \"btn-danger\", \"btn-width\", 3, \"click\"], [1, \"model-header\"], [1, \"model-body\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"categoryName\", 1, \"col-sm-2\", \"col-form-label\"], [\"type\", \"text\", \"id\", \"categoryName\", \"placeholder\", \"Category Name\", \"formControlName\", \"categoryName\", 1, \"form-control\"], [\"for\", \"categoryDescription\", 1, \"col-sm-2\", \"col-form-label\"], [\"type\", \"text\", \"id\", \"categoryDescription\", \"placeholder\", \"Description\", \"formControlName\", \"categoryDescription\", 1, \"form-control\"], [\"for\", \"categoryImageUrl\", 1, \"col-sm-2\", \"col-form-label\"], [\"type\", \"text\", \"id\", \"categoryImageUrl\", \"placeholder\", \"Image URL\", \"formControlName\", \"categoryImageUrl\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"type\", \"button\", \"value\", \"Close\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"for\", \"categoryName\", 1, \"col-sm-2\", \"col-form-label\", \"label-modal\"], [\"type\", \"text\", \"id\", \"categoryName\", \"placeholder\", \"Category Name\", \"formControlName\", \"categoryName\", 1, \"form-control\", \"input-modal\"], [\"for\", \"categoryDescription\", 1, \"col-sm-2\", \"col-form-label\", \"label-modal\"], [\"type\", \"text\", \"id\", \"categoryDescription\", \"placeholder\", \"Description\", \"formControlName\", \"categoryDescription\", 1, \"form-control\", \"input-modal\"], [\"for\", \"categoryImageUrl\", 1, \"col-sm-2\", \"col-form-label\", \"label-modal\"], [\"type\", \"text\", \"id\", \"categoryImageUrl\", \"placeholder\", \"Image URL\", \"formControlName\", \"categoryImageUrl\", 1, \"form-control\", \"input-modal\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-modal\", \"btn-modal-update\"], [\"type\", \"button\", \"value\", \"Close\", 1, \"btn\", \"btn-primary\", \"btn-modal\", \"btn-modal-close\", 3, \"click\"]],\n  template: function CategoriesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r19 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"h3\");\n      i0.ɵɵtext(3, \"Categories\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"input\", 1);\n      i0.ɵɵlistener(\"click\", function CategoriesComponent_Template_input_click_4_listener() {\n        return ctx.backToProducts();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"input\", 2);\n      i0.ɵɵlistener(\"click\", function CategoriesComponent_Template_input_click_5_listener() {\n        i0.ɵɵrestoreView(_r19);\n        const _r2 = i0.ɵɵreference(24);\n        return i0.ɵɵresetView(ctx.addCategoryDetails(_r2));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"label\", 4);\n      i0.ɵɵtext(8, \"Search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 5, 6);\n      i0.ɵɵlistener(\"keyup\", function CategoriesComponent_Template_input_keyup_9_listener() {\n        i0.ɵɵrestoreView(_r19);\n        const _r0 = i0.ɵɵreference(10);\n        return i0.ɵɵresetView(ctx.searchCategory(_r0.value));\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"table\", 7)(12, \"tr\")(13, \"th\");\n      i0.ɵɵtext(14, \"Category ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Category Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Category Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"Image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"th\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, CategoriesComponent_tr_22_Template, 12, 4, \"tr\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(23, CategoriesComponent_ng_template_23_Template, 21, 1, \"ng-template\", 9, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(25, CategoriesComponent_ng_template_25_Template, 21, 1, \"ng-template\", 9, 11, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelement(27, \"router-outlet\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n    }\n  },\n  dependencies: [i4.NgForOf, i2.RouterOutlet, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n  styles: [\"div[_ngcontent-%COMP%]{margin-top:77px}.top[_ngcontent-%COMP%]{margin-bottom:31px}.serach-div[_ngcontent-%COMP%]{margin-top:30px;font-weight:500;font-size:20px}.search-category[_ngcontent-%COMP%]{width:30%;border-color:#000;display:inline}.Search-text[_ngcontent-%COMP%]{margin-right:10px}.btn-one[_ngcontent-%COMP%]{float:right;margin-right:30px}.btn-two[_ngcontent-%COMP%]{float:right;margin-right:5px}h3[_ngcontent-%COMP%]{margin-bottom:31px;display:inline}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:7px 20px}th[_ngcontent-%COMP%]{text-align:center;background-color:#00f;color:#fff;height:47px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#d3d3d3}img[_ngcontent-%COMP%]{width:170px}.btn[_ngcontent-%COMP%]{color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#1c1b1b;border-color:#1c1b1b}.btn-primary[_ngcontent-%COMP%]:hover{background-color:green}.btn-danger[_ngcontent-%COMP%]{background-color:#f61818}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b42626}.btn-width[_ngcontent-%COMP%]{width:100%}.model-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:-3rem}.label-modal[_ngcontent-%COMP%]{margin-left:11px}.input-modal[_ngcontent-%COMP%]{margin-left:7px;width:97%}.btn-modal[_ngcontent-%COMP%]{margin:-6px auto auto;display:block}.btn-modal-update[_ngcontent-%COMP%]{width:60%;margin-top:12px}.btn-modal-close[_ngcontent-%COMP%]{width:50%;margin-bottom:12px}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}